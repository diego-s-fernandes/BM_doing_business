---
title: "db-2020"
author: "Diego dos Santos Fernandes"
date: "03/01/2020"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
library(tidyverse)
library(tidyverse)
library(ggrepel)
library(readxl)
library(stargazer)
library(gghighlight)
library(ggpubr)
library(ggthemes)
library(gridExtra)
library(corrplot)
library(GGally)
library(devtools)
library(janitor)
library(hablar)
library(patchwork)
library(dplyr)

#remotes::install_github("anthonynorth/rscodeio")
#https://github.com/anthonynorth/rscodeio
#rscodeio::install_theme()
```

```{r}
library(readxl)
DB2020 <- read_excel("DB2020.xlsx", sheet = "All data", 
    skip = 3)

```

# dados da Pontuação EoDB
## Unificar as metodologias mais atuais
```{r}

eodb <- DB2020[ ,1:9]
eodb <- eodb[ ,-6]
eodb <- eodb %>%  janitor::clean_names() %>% janitor::remove_empty(c("rows","cols"))

eodb <- eodb %>% 
  mutate( pontuacao = dplyr::coalesce(ease_of_doing_business_score_db17_20_methodology,ease_of_doing_business_score_db15_methodology,ease_of_doing_business_score_db10_14_methodology))
eodb <- eodb[ , c(1:5,9)] 
eodb <- eodb %>% na.omit()



```

## tratando as informações com países com coleta de dados em duas cidades

```{r}
#usando o Rbase para renomear as linhas
eodb$economy[eodb$economy == "Brazil São Paulo" & eodb$db_year <= 2013] <- "Brazil"
eodb$economy[eodb$economy == "Russian Federation Moscow" & eodb$db_year <= 2013] <- "Russian Federation"
eodb$economy[eodb$economy == "China Shanghai" & eodb$db_year <= 2013] <- "China"
eodb$economy[eodb$economy == "India Mumbai" & eodb$db_year <= 2013] <- "India"
eodb$economy[eodb$economy == "Japan Tokyo" & eodb$db_year <= 2013] <- "Japan"
eodb$economy[eodb$economy == "Mexico Mexico City" & eodb$db_year <= 2013] <- "Mexico"

# usando o dplyr para fazer a mesma coisa
eodb <- eodb %>% 
    mutate( economy = if_else(economy == "United States New York City" & db_year <= 2013, "United States", economy),
            economy = if_else(economy == "Pakistan Karachi" & db_year <= 2013, "Pakistan", economy),
            economy = if_else(economy == "Bangladesh Dhaka" & db_year <= 2013, "Bangladesh", economy),
            economy = if_else(economy == "Indonesia Jakarta" & db_year <= 2013, "Indonesia", economy),
            economy = if_else(economy == "Nigeria Lagos" & db_year <= 2013, "Nigeria", economy),
             
                )



```
























